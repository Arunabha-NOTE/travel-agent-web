#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

commit_msg_file="$1"
commit_msg=$(cat "$commit_msg_file")

pattern="^(feat|fix|chore|docs|refactor|test|ci)(\(.+\))?: .+"

if ! echo "$commit_msg" | grep -Eq "$pattern"; then
  echo "‚ùå Invalid commit message."
  echo ""
  echo "Expected format:"
  echo "  feat: description"
  echo "  fix(auth): description"
  echo ""
  echo "Allowed types: feat, fix, chore, docs, refactor, test, ci"
  exit 1
fi
